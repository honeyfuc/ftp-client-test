# Тестирование написанного FTP клиента

## Описание

В данном проекте реализованы тест кейсы и собран test-suite для проверки 
корректной функицональности данного проекта https://github.com/honeyfuc/ftp-client

## Запуск Test-Suite

Для запуска test-suite следует слонировать данный репозиторий на локальный компьютер

```sh
  git clone https://github.com/honeyfuc/ftp-client-test.git
```

Открыть проект в IDEA и запустить `testng.xml` файл

>[!NOTE]
>
> После выполнения всех тест-кейсов дожно получится примерно такая ситуация:
>
>![Результаты](/docs/images/success.png "Результаты")

----

## Обзор и описание тестов

В данном проекте реализованы два класса - FtpClientTest и StudentServiceTest, в которых написаны тест-кейсы основных методов основного проекта.

### FtpClientTest

В данном классе написаны тесты на проверку работы таких методов как:

1. connect() - подключение к FTP серверу
2. activatePassiveMode() - включение пассивного режима работы с сервером
3. uploadFile(String file) - загрузка файла на сервер
4. downloadFile(String file) - получение файла для последущуй его обработки
----

*В качестве тестовых данных используются DataProvider из класса FtpClientDataSet*

1. `connectionTest(host, username, password)` - тест-кейс проверяющий валидное соединение с FTP сервером
   - использует тестовые данные из DataProvider "validConnectionData"
   - проверяется, что *socket, reader, writer* после работы метода `connect()` не равны null
   - проверяется, что поле FtpClient `isConnected` принимает состояние `true`
  
2. `activatePassiveModeTest()` - тест-кейс проверяющий валидное включение пассивного режима с FTP сервером
   - перед проверкой происходит соединение с сервером с помощью метода `connect()`
   - проверяется, что в консоль выводится соответсвующее сообщение
   - проверяется, что поле FtpClient `serverHost` принимает состояние `NotNull`, а `serverPort` - числовое значение
  
3. `uploadFileTest(file, expectedResult)` - тест-кейс проверяющий загрузку файла на сервер
   - использует тестовые данные из DataProvider "uploadFileData"
   - перед проверкой происходит соединение с сервером с помощью метода `connect()`
   - проверяется, что в cлучае несуществующего файла выбрасывается `NoSuchFileException.class`
   - проверяется, что в случае достоверного файла метод `uploadFile()` возвращает `true`
  
4. `downloadFileTest(file, expectedResult)` - тест-кейс проверяющий выгрузку файла с сервера
   - использует тестовые данные из DataProvider "downloadFileData"
   - перед проверкой происходит соединение с сервером с помощью метода `connect()` и загрузка mock файла
   - проверяется, что в случае неудачи метод `downloadFile()` возвращает `false` и поле `fileBuffer` принимает `null`
   - проверяется, что в случае успеха`downloadFile()` возвращает `true` и поле `fileBuffer` принимает НЕ `null`
  
----

### StudentServiceTest

В данном классе написаны тесты на проверку работы таких методов как:

1. getAllStudents() - отображение всех студентов из файла с FTP сервера
2. getStudentById(long id) - получение студента по id
3. deleteStudentById(long) -удаление студента по id
----

*В качестве тестовых данных используются DataProvider из этого же класса*

*Для каждого метода реализован `@BeforeMethod`, отвечающий за создание интстансов классов и предварительное соединение с сервером. В `@AfterMethod` - инстанс `ftpClient` сбрасывается до начального состояния*

1. `getAllStudentsTest()` - тест-кейс проверяющий отображение студантов в консоли
   - проверяется, что *fileBuffer*  не равен `null`

2. `getAllStudentsTest_invalid()` - тест-кейс проверяющий, что в консоль выводится верное сообщение
    - проверяется, что *fileBuffer* равен `null`
    
2. `activatePassiveModeTest()` - тест-кейс проверяющий валидное включение пассивного режима с FTP сервером
   - перед проверкой происходит соединение с сервером с помощью метода `connect()`
   - проверяется, что в консоль выводится соответсвующее сообщение
   - проверяется, что поле FtpClient `serverHost` принимает состояние `NotNull`, а `serverPort` - числовое значение
  
3. `getStudentByIdTest(id)` - тест-кейс проверяющий получение студента по его id
   - использует тестовые данные из DataProvider "studentsData"
   - перед выполнением происходит загрузка mock файла
   - проверяются оба случая - когда пользователь с таким id есть и его нет (проверка на отображение соответсвующего сообщения в консоль)
  
4. `deletetStudentByIdTest(id)` - тест-кейс проверяющий удаление студента по его id
   - использует тестовые данные из DataProvider "studentsData"
   - перед выполнением происходит загрузка mock файла
   - проверяются оба случая - когда пользователь с таким id есть и его нет (проверка на отображение соответсвующего сообщения в консоль)

